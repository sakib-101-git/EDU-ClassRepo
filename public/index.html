<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDU ClassRepo - Login</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="login-page">
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>
    
    <div class="login-container">
        <div class="login-brand">
            <div class="brand-logo">
                <i class="fas fa-book-reader"></i>
                <h1>EDU ClassRepo</h1>
            </div>
            <p class="brand-tagline">The official note sharing platform for East Delta University students.</p>
            <div class="brand-features">
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-download"></i></div>
                    <span>Download notes from seniors</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-upload"></i></div>
                    <span>Share your study materials</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-folder-open"></i></div>
                    <span>Organized by department</span>
                </div>
            </div>
            <div class="brand-footer">Â© East Delta University</div>
        </div>

        <div class="login-form-section">
            <div class="form-header">
                <h2 id="form-title">Get Started</h2>
                <p id="form-subtitle">Sign in to access notes and resources</p>
            </div>

            <div class="toggle-buttons" id="login-toggle">
                <button class="toggle-btn active" onclick="setUserType('student')">
                    <i class="fas fa-user-graduate"></i> Student
                </button>
                <button class="toggle-btn" onclick="setUserType('admin')">
                    <i class="fas fa-user-shield"></i> Admin
                </button>
            </div>

            <div id="error-message" class="alert alert-error hidden"></div>

            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" id="login-email" placeholder="your@eastdelta.edu.bd" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <div class="input-wrapper">
                        <input type="password" class="form-input has-toggle" id="login-password" placeholder="Enter password" required>
                        <button type="button" class="password-toggle" onclick="togglePassword('login-password', this)">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-sign-in-alt"></i> Sign In</button>
            </form>

            <form id="signup-form" class="hidden" onsubmit="handleSignup(event)">
                <div style="margin-bottom: 20px;">
                    <button type="button" class="back-link" onclick="showLoginForm()" style="background:none;border:none;padding:0;cursor:pointer;color:var(--text-medium);font-size:14px;display:inline-flex;align-items:center;gap:6px;">
                        <i class="fas fa-arrow-left"></i> Back to Sign In
                    </button>
                </div>
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" class="form-input" id="signup-name" placeholder="Your full name" required>
                </div>
                <div class="form-row">
                <div class="form-group">
                    <label>Student ID</label>
                    <input type="text" class="form-input" id="signup-studentid" placeholder="ID" required pattern="[0-9]*" inputmode="numeric" onkeypress="return isNumberKey(event)" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                </div>
                    <div class="form-group">
                        <label>Gender</label>
                        <select class="form-select" id="signup-gender" required>
                            <option value="">Select</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Department</label>
                        <select class="form-select" id="signup-dept" required>
                            <option value="">Select</option>
                            <option value="CSE">CSE</option>
                            <option value="EEE">EEE</option>
                            <option value="BBA">BBA</option>
                            <option value="ENG">English</option>
                            <option value="ECO">Economics</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Semester</label>
                        <select class="form-select" id="signup-semester">
                            <option value="">Select</option>
                            <option value="1">1st</option>
                            <option value="2">2nd</option>
                            <option value="3">3rd</option>
                            <option value="4">4th</option>
                            <option value="5">5th</option>
                            <option value="6">6th</option>
                            <option value="7">7th</option>
                            <option value="8">8th</option>
                            <option value="9">9th</option>
                            <option value="10">10th</option>
                            <option value="11">11th</option>
                            <option value="12">12th</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" id="signup-email" placeholder="your@eastdelta.edu.bd" required>
                    <p class="form-hint">Only @eastdelta.edu.bd emails allowed</p>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Password</label>
                        <div class="input-wrapper">
                            <input type="password" class="form-input has-toggle" id="signup-password" placeholder="Min 6 chars" required autocomplete="new-password" autofill="off" data-form-type="other">
                            <button type="button" class="password-toggle" onclick="togglePassword('signup-password', this)"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Confirm</label>
                        <div class="input-wrapper">
                            <input type="password" class="form-input has-toggle" id="signup-confirm" placeholder="Re-enter" required autocomplete="new-password" autofill="off" data-form-type="other">
                            <button type="button" class="password-toggle" onclick="togglePassword('signup-confirm', this)"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-user-plus"></i> Create Account</button>
            </form>

            <div class="form-footer" id="login-footer">
                New student? <span class="form-link" onclick="showSignupForm()">Create an account</span>
            </div>
            <div class="form-footer hidden" id="signup-footer">
                Already have an account? <span class="form-link" onclick="showLoginForm()">Sign in</span>
            </div>
            <div id="admin-notice" class="alert alert-warning hidden mt-20">
                <i class="fas fa-info-circle"></i> Admin accounts are pre-configured.
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        // Redirect if logged in
        if (isLoggedIn()) window.location.href = 'dashboard.html';
        
        
        // Function to allow only numbers in Student ID field
        function isNumberKey(evt) {
            const charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                evt.preventDefault();
                return false;
            }
            return true;
        }
        
        // Student ID field - only allow numbers
        document.addEventListener('DOMContentLoaded', () => {
            const studentIdInput = document.getElementById('signup-studentid');
            if (studentIdInput) {
                studentIdInput.addEventListener('paste', (e) => {
                    e.preventDefault();
                    const paste = (e.clipboardData || window.clipboardData).getData('text');
                    studentIdInput.value = paste.replace(/[^0-9]/g, '');
                });
                
                studentIdInput.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '');
                });
            }
            
            // Prevent password autofill
            const passwordInputs = ['signup-password', 'signup-confirm'];
            passwordInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.setAttribute('autocomplete', 'new-password');
                    setTimeout(() => {
                        if (input.value && !input.dataset.userTyped) {
                            input.value = '';
                        }
                    }, 100);
                    input.addEventListener('input', () => {
                        input.dataset.userTyped = 'true';
                    });
                }
            });
        });
    </script>
</body>
</html>
